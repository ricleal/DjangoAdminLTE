!function(e,t){var i;return i=function(){function t(t,i,n){var r,s;r=e(t),s={root:"/",script:"/files/filetree",folderEvent:"click",expandSpeed:500,collapseSpeed:500,expandEasing:"swing",collapseEasing:"swing",multiFolder:!0,loadMessage:"Loading...",errorMessage:"Unable to get file tree information",multiSelect:!1,onlyFolders:!1,onlyFiles:!1},this.jqft={container:r},this.options=e.extend(s,i),this.callback=n,r.html('<ul class="jqueryFileTree start"><li class="wait">'+this.options.loadMessage+"<li></ul>"),this.showTree(r,escape(this.options.root))}return t.prototype.showTree=function(t,i){var n,r,s,a;return n=e(t),a=this.options,r=this,n.addClass("wait"),e(".jqueryFileTree.start").remove(),s={dir:i,onlyFolders:a.onlyFolders,onlyFiles:a.onlyFiles,multiSelect:a.multiSelect},e.ajax({url:a.script,type:"POST",dataType:"HTML",data:s}).done(function(t){var s;return n.find(".start").html(""),n.removeClass("wait").append(t),a.root===i?n.find("UL:hidden").show("undefined"!=typeof callback&&null!==callback):(void 0===jQuery.easing[a.expandEasing]&&(console.log("Easing library not loaded. Include jQueryUI or 3rd party lib."),a.expandEasing="swing"),n.find("UL:hidden").slideDown({duration:a.expandSpeed,easing:a.expandEasing})),s=e('[rel="'+decodeURIComponent(i)+'"]').parent(),a.multiSelect&&s.children("input").is(":checked")&&s.find("ul li input").each(function(){return e(this).prop("checked",!0),e(this).parent().addClass("selected")}),r.bindTree(n)}).fail(function(){return n.find(".start").html(""),n.removeClass("wait").append("<p>"+a.errorMessage+"</p>"),!1})},t.prototype.bindTree=function(t){var i,n,r,s,a,l;return i=e(t),a=this.options,s=this.jqft,n=this,r=this.callback,l=/^\/.*\/$/i,i.find("LI A").on(a.folderEvent,function(){var t,i;return t={},t.li=e(this).closest("li"),t.type=null!=(i=t.li.hasClass("directory"))?i:{directory:"file"},t.value=e(this).text(),t.rel=e(this).prop("rel"),t.container=s.container,e(this).parent().hasClass("directory")?e(this).parent().hasClass("collapsed")?(n._trigger(e(this),"filetreeexpand",t),a.multiFolder||(e(this).parent().parent().find("UL").slideUp({duration:a.collapseSpeed,easing:a.collapseEasing}),e(this).parent().parent().find("LI.directory").removeClass("expanded").addClass("collapsed")),e(this).parent().removeClass("collapsed").addClass("expanded"),e(this).parent().find("UL").remove(),n.showTree(e(this).parent(),e(this).attr("rel").match(l)[0]),n._trigger(e(this),"filetreeexpanded",t)):(n._trigger(e(this),"filetreecollapse",t),e(this).parent().find("UL").slideUp({duration:a.collapseSpeed,easing:a.collapseEasing}),e(this).parent().removeClass("expanded").addClass("collapsed"),n._trigger(e(this),"filetreecollapsed",t)):(a.multiSelect?e(this).parent().find("input").is(":checked")?(e(this).parent().find("input").prop("checked",!1),e(this).parent().removeClass("selected")):(e(this).parent().find("input").prop("checked",!0),e(this).parent().addClass("selected")):(s.container.find("li").removeClass("selected"),e(this).parent().addClass("selected")),n._trigger(e(this),"filetreeclicked",t),"function"==typeof r&&r(e(this).attr("rel"))),!1}),"click"!==a.folderEvent.toLowerCase?i.find("LI A").on("click",function(){return!1}):void 0},t.prototype._trigger=function(t,i,n){var r;return r=e(t),r.trigger(i,n)},t}(),e.fn.extend({fileTree:function(t,n){return this.each(function(){var r,s;return r=e(this),s=r.data("fileTree"),s||r.data("fileTree",s=new i(this,t,n)),"string"==typeof t?s[option].apply(s):void 0})}})}(window.jQuery,window);